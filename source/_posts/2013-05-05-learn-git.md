---
title: Git学习笔记
date: 2013-05-05
categories: 工具使用
tags: git
---
Git是开源社区送给每一个人的宝贝。使用Git多年了，但每次翻看Git相关的书籍（主要是蒋鑫老师的《GotGit权威指南》，感谢蒋鑫老师写出这么好的作品）都有新的收获，这里主要记录一些读书笔记，还有自己对Git的一些理解。
<!--more-->


Git的学习曲线可能比较陡峭，特别是有些命令变化多端，很容易让初学者混乱。但是一但了解了它的内部原理操作起来就如鱼得水了。

## 几个常用但又容易忽略的Git命令
执行`git add -u`命令可以将所有已跟踪的修改过的文件加入暂存区。

执行`git add -A`命令可以将本地删除文件和新增文件都登记到提交暂存区。

执行`git add -p`命令可以对一个文件内的修改进行有选择性的添加。

执行`git commit [--] [<file>…​]`命令可以直接将未添加到暂存区的修改直接提交，类似svn的commit命令。

执行`git commit -p`命令可以交互式的选择所需要提交的内容。

执行`git log --oneline`命令可以以单行形式查看log。

执行`git log --stat`命令可以在查看log的同时看到文件变更。

执行`git log -p`命令可以在查看log的同时看到具体的修改内容。

执行`git log -L :<funcname>:<file>`可以查看指定函数的操作历史。

执行`git log -L <start>,<end>:<file>`可以查看指定行的操作历史，`<start>`, `<end>`可以是`/reg/`表达式。

执行`git blame <file>`可以查看文件每一行最后一次修改记录。缺陷是只能追踪现有行，已经删除的行无法追踪到。不如`git log -L`实用。

## Git命令行选项

- `--version` 显示Git版本
- `--help` 显示帮助
- `--bare` 把当前库当做bare（裸库）来操作
- `-C <path>` 类似`make -C`命令，切换到path下执行命令
- `-c <name>=<value>` 传入配置值，该值会覆盖配置文件中的值该值
- `--exec-path[=<path>]` 省略path可以打印当前Git的安装位置
- `--git-dir=<path>` 在Git仓库外操作仓库时，可参数指定仓库的位置
- `--work-tree=<path>` 指定工作区（workt-tree）的位置

## Git配置文件
Git有三个存放配置文件的地方，优先级从高到底依次是本仓库、用户家目录配置文件（两个地方）、系统配置文件。
```bash
./git/config
~/.config/git/config
~/.gitconfig
/etc/gitconfig
```
相同的配置，优先级高的最终生效。该优先是由Git读取配置文件的顺序决定的。可以用strace使用看一下查找配置文件的顺序。
```bash
$ strace -e trace=file git config  --list
...
access("/etc/gitconfig", R_OK)          = -1 ENOENT (No such file or directory)
access("/home/dailyman/.config/git/config", R_OK) = -1 ENOENT (No such file or directory)
access("/home/dailyman/.gitconfig", R_OK) = 0
access(".git/config", R_OK) 
```

当然也可以使用命令行参数`-c <name>=<value>`指定参数。